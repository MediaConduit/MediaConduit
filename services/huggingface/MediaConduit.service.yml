name: "huggingface-service"
version: "1.0.0"
description: "HuggingFace text-to-image generation service with dynamic model loading"

docker:
  composeFile: "docker-compose.yml"
  serviceName: "huggingface-text-to-image"
  image: "huggingface-text-to-image:latest"
  ports: [8007]
  healthCheck:
    url: "http://localhost:8007/health"
    interval: "15s"
    timeout: "10s"
    retries: 5
  environment:
    CUDA_VISIBLE_DEVICES: "0"
    PYTORCH_CUDA_ALLOC_CONF: "max_split_size_mb:512"
    HF_HOME: "/app/hf_cache"
    HF_HUB_ENABLE_HF_TRANSFER: "1"
  volumes:
    - "hf_cache:/app/hf_cache"
    - "./temp:/app/temp"
    - "./logs:/app/logs"

capabilities:
  - "text-to-image"
  - "image-generation"
  - "diffusion-models"

requirements:
  gpu: true
  memory: "8GB"
  cpu: "4.0"

metadata:
  repository: "https://github.com/mediaconduit/huggingface-service"
  documentation: "README.md"
  license: "MIT"
